物件導向開發
====

類別
------

* 凝聚力
  - 不要把類別當做是函式集合
  - 資料與操作方式的集合
  - 人聽到「你的名字？」人會用嘴巴說出自己的名字
  - 人聽到「開動！」人會進行一連串動作來將食物塞進嘴巴
* 類別物件的藍圖
  - 系統會參照類別來生成物件實體
  - 同一個類別可以對應多個不同的物件實體
* 類別不一定要跟現實生活的東西有關聯，而是跟專案的領域有關連
  - 教學：人、動物
  - CMS ：分類、文章、標籤
  - ERP ：權限、部門
  - 電子商務：商品、會員、購物車、訂單
  - 包裝商業邏輯
* 類別也可以是行為、演算法、或抽象的概念
  - 指令、模組
  - 觀察者、策略
* 類別會佔記憶體空間
  - 類別也有它需要儲存的資訊
* PHP 的類別是全域的
  - 一開始就要載入類別定義檔案
  - 只有在載入類別定義檔案後，類別才會存在
  - autoload

物件
----

* 物件能管理自身的狀態
  - 每個物件都保有自己的狀態
  - 只有當物件消滅，其狀態才會消失
  - 物件本身的狀態要保持在物件屬性中，而不是拿出來後，再用函式處理
* 物件變數只放位址

成員
----

* 方法與屬性
  - 方法看起來像函式
  - 屬性看起來像變數
  - 調用方法又稱為傳遞訊息給物件
  - 屬性可以有預設值，但必須是常數
  - 實作同類別的不同物件，其屬性不會互相干擾
* 成員照取用的方式，可分為靜態成員與實體成員
  - 取用類別靜態成員，用 self::
  - 取用物件實體成員，用 $this->

作用域
------

* private: 我的就是我的
* protected: 我和我的子孫可以用
* public: 大家都能用
* static: 影響同型態的所有物件實體
* 類別 static 方法中不可用 $this
* 定義類別屬性時，不能給非 scalar 的值，例如物件。
* 方法 local 變數
* 在類別方法裡，屬於這個類別的物件，也可以直接呼叫它的 private 方法

建構子與解構子
------

* PHP 5 以前是用類別同名方法做為建構子，在 PHP 5 後則可使用 __construct()
* __destruct() 解構子在 ISAPI 模式時，由 gc 控制，當物件被回收就會執行
* 建構子和解構子都可以被繼承，除非要覆寫，否則不需要在子類別額外添加
* 建構子可以設為私有，這樣一來就必須透過其他方法來建立物件

範例
-----

* mysql_* 轉成物件導向形式

繼承 (Inheritance)
------

* 擴展 (extend)
* 單一繼承
* 共用相同的邏輯
* 覆寫 (override) 不同的邏輯

封裝 (Encapsulation)
------

* 封裝狀態
* 封裝變化

抽象 (Abstraction)
------

* 省略掉細節，只保留最根本的資訊

### 範例

* 指向操作裝置：操作螢幕上的游標
* 類型：滑鼠、軌跡球、觸控板、小紅點
* 關連式資料庫
* 類型： MySQL, MSSQL, SQLite, PostgreSQL

多型 (Polymorphism)
------

一視同仁

* 弱型別: Duck Type (只考慮能不能做什麼)
* 強型別:必須是同一個型別或其子類別

抽象類別與介面
------

### Abstract Class 抽象類別

* 概念類別
* 抽象類不能被實體化
* 抽象類不一定要有抽象方法
* 抽象方法一定要被包含在抽象類中
* 繼承的抽象類別的類別一定要實作其抽象方法

###  Interface 介面

告訴使用者可以怎麼用這個物件

* 不能有任何實作，只提供方法的宣告
* 類別必須「實作」介面
* 可以實作多個介面
* Interface 可以繼承 Interface
* 可以用 is_a / instanceof 判斷

異常
------

處理異常錯誤的好方法

* throw
* try ... catch
* 一層一層往上拋
* Exception 可以被繼承
